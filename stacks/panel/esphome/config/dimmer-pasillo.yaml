esphome:
  name: "dimmer-prototype"
  friendly_name: Dimmer

esp8266:
  board: esp01_1m

logger:

api:

ota:

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Dimmer"
    password: !secret wifi_password

captive_portal:

output:
  - platform: ac_dimmer
    id: dimmer1
    gate_pin: GPIO12
    init_with_half_cycle: true
    zero_cross_pin:
      number: GPIO13
      mode:
        input: true
      inverted: yes

light:
  - platform: monochromatic
    id: light_1
    restore_mode: ALWAYS_OFF 
    output: dimmer1
    name: Dimmerized Light
    gamma_correct: 4.0

remote_receiver:
  id: rf_rx
  tolerance: 20%
  pin: 
    number: GPIO14

binary_sensor:
  - platform: remote_receiver
    name: rf_action_button
    rc_switch_raw:
      code: "0001001101"
      protocol: 1
    on_press:
      then:
        # Toggles the lamp
        - light.toggle:
            id: light_1
        - logger.log: "Received code for toggling state"
  - platform: remote_receiver
    name: rf_action_increase
    rc_switch_raw:
      code: "0001010101"
      protocol: 1
    on_press:
      then:   
        # Increases the brightness by 5%
        - light.dim_relative:
            id: light_1
            relative_brightness: 5%
        - logger.log: "Received code for increasing brightness"
  - platform: remote_receiver
    name: rf_action_decrease
    rc_switch_raw:
      code: "0001011101"
      protocol: 1
    on_press:
      then:   
        # Decreases the brightness by 5%
        - light.dim_relative:
            id: light_1
            relative_brightness: -5%
        - logger.log: "Received code for decreasing brightness"